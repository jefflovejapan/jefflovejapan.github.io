I"N<p><img src="/assets/Learning_AV_Foundation@2x.png" alt="cover" /></p>

<p>Lately I‚Äôve been wanting to do more learning outside work hours, so when my coworkers shared their personal goals for 2020 in Slack, I thought, ‚ÄúThis is the year I read a technical book a month.‚Äù Since I work with AVFoundation every day at <a href="https://1se.co">1 Second Everyday</a>, I figured what better way to start than with a book-length treatment of my favorite (?) framework, Bob McCune‚Äôs <a href="http://www.learningavfoundation.com"><em>Learning AV Foundation: A Hands-on Guide to Mastering the AV Foundation Framework</em></a>. At 432 pages it covers a lot of ground, with walkthroughs on media playback and capture, working with assets and metadata, and composition and editing. It starts from the very basics (how digital media is represented on disk) and works up to more complex topics ‚Äì from how to work with rational time to how to control focus and exposure on iPhone cameras, eventually building up to a multitrack editing app by the end of the book.</p>

<p>I love technical books like David Beazley‚Äôs <a href="https://www.dabeaz.com/per.html"><em>Python Essential Reference</em></a> ‚Äì they explain complex ideas in terse, well-formulated language, give a clear structure and progression, and steer clear of the jokey voice that shows up everywhere in tech books for beginners. I wouldn‚Äôt put <em>Learning AV Foundation</em> in quite the same tier ‚Äì it‚Äôs a project-based book and not really a reference ‚Äì but it was a good read, communicated the main ideas clearly, and provided enough scaffolding that the project work could be really focused on what he‚Äôs trying to teach in a given chapter. I won‚Äôt spoil what‚Äôs in the book, but here are a handful of takeaways from someone who‚Äôs spent the last 8 months or so working with AV Foundation:</p>

<ul>
  <li>I had no idea about the atom/box structure of MP4 and QuickTime files. I wish that Apple‚Äôs Atom Inspector app was updated to run on recent OSes ‚Äì please consider filing a Radar referencing <a href="https://openradar.appspot.com/radar?id=5004193051967488">this report</a> if you‚Äôd like the same. Also, any recommendations for other inspection tools for MP4 and MOV?</li>
  <li>The richness of metadata that MP4 and QuickTime can support is really cool. In particular, the idea that you can add dictionaries containing your own structured data to a video file.</li>
  <li>How simple it is to set up AirPlay</li>
  <li>How <code class="language-plaintext highlighter-rouge">AVCaptureSession</code> works and how you can wire different inputs and outputs up to it</li>
</ul>

<p>So what‚Äôs not to like about it?</p>

<ul>
  <li>All Objective-C</li>
  <li>Some stuff is outdated (published in 2015) and the source code contains a couple of frustrating errors</li>
  <li>Reading code in the iBooks ePUB version is really bad, and pretty typical. I‚Äôd recommend a physical copy or PDF if possible.</li>
  <li>I would love to have had a treatment of some higher-level ideas, like dealing with multiple timescales and performance considerations for custom video compositors.</li>
</ul>

<p>I‚Äôd definitely give it a thumbs up overall and would recommend it to people who want a broad overview of the framework. It goes pretty deep in parts (<code class="language-plaintext highlighter-rouge">AVAssetWriter</code>, <code class="language-plaintext highlighter-rouge">AVVideoCompositionCoreAnimationTool</code>, <code class="language-plaintext highlighter-rouge">AVCaptureVideoDataOutput</code>) and always leaves the reader with enough clues to continue digging on their own.</p>
:ET